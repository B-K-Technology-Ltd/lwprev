{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to LightWare's Developer Portal","text":"<p>For full documentation visit mkdocs.org.</p>"},{"location":"#commands","title":"Commands","text":"<ul> <li><code>mkdocs new [dir-name]</code> - Create a new project.</li> <li><code>mkdocs serve</code> - Start the live-reloading docs server.</li> <li><code>mkdocs build</code> - Build the documentation site.</li> <li><code>mkdocs -h</code> - Print help message and exit.</li> </ul>"},{"location":"#project-layout","title":"Project layout","text":"<pre><code>mkdocs.yml    # The configuration file.\ndocs/\n    index.md  # The documentation homepage.\n    ...       # Other markdown pages, images and other files.\n</code></pre>"},{"location":"landing-moving-platform/","title":"M350 Landing on a Moving Platform","text":"<p>In this scenario, we are going to walk through the steps to add a capability to the DJI M350 which isn't present on the vehicle by default: The ability to land on a moving platform.</p> <p>Such platform can be a ground vehicle or a marine vehicle.  We will choose the second context, because its application is more grounded.  It's not practical to stop a vessel for a drone to land on it, so it is up to the drone to be able to do so.</p> <p>There are many reasons why you would want a drone to land on a moving vessel, none of which are particularly interesting for what we are trying to achieve here, but let's assume we are in the context of delivery.</p> <p>Warning</p> <p>Add a diagram of what we are talking about.</p> <p>As you can see, the boat will be subjected to the movement of the water.  This will force its deck to be moving along three axis. For a safe landing, an undamaged package and a reusable drone, we need to achieve a clean landing.</p> <p>This means we need to understand the condition of the boat, take a decision and execute the landing.</p> <p>We will go through all the details in the plan part of this tutorial.</p> <p>Note</p> <p>As the scope of this tutorial is to focus on how to use our products, we will skim through the other components and only cover the extent necessary for the whole solution to be reproducible. We will provide insight on how to explore this further and productize this should this be something you would like to pursue.</p>"},{"location":"landing-moving-platform/components/","title":"Components","text":"<p>Let's go over the components for this solution and more importantly, cover why these would be leveraged, and where improvements are possible.</p>"},{"location":"landing-moving-platform/components/#parts-list","title":"Parts List","text":"Image Component Role Quantity DJI M350 Main Vehicle 1 LW20/C Landing Deck Plane Detection 4 Raspberry Pi 5 + SD Card Onboard Compute 1 Raspberry Pi 5 Cooling Kit Cooling for Onboard Compute  Note: This is not strictly necessary for this exercise, but future proofs the setup. 1 DJI E-Port Kit Payload SDK Interface 1 5A/5V Voltage Regulator Voltage regulator for the Pi 5 which requires 5V/5A while the E-Port 5V rail is limited to 2A 1 I2C Breakout Board Ad-hoc I2C bus hardware for all the sensors 1 USB to TTL Cable Connect the UART from the devkit to the Pi 1 LW20C Mounting Brackets Holding the LW20/C against the rails 4 Lidar Mounting Rails Holding the LW20/C in an array configuration 2 Compute and E-Port Mounting Kit Holding the E-Port and the Raspberry pi in place 1 Voltage Regulator/I2C Bus Mount Holding the Voltage Regulator and the I2C Bus breakout in place 1 XT30 Power Cables Provide power to the voltage regulator. Note: You can make these yourself if you feel up to it. This example uses 16AWG which is much more than needed. 1 Female Dupont Cables Power from voltage regulator to Pi and I2C wiring between Pi and Bus breakout. Note: You can make these yourself if you feel up to it - We're going to crimp the LW20 cables anyway. It's also quite convenient to buy ready made cable and cut/strip them to your need 6 M1.6 x 8mm Counter Sunk Screws Secure the clips to the rails 12 (4x3) M2.5 x 4mm Heat-set Insert Allows to attach he voltage regulator and easily remove/reinstall 4 M3 x 4mm Heat-set Insert Allows to attach he voltage regulator and easily remove/reinstall 4 M2.5 x 6mm Screws Secure the Raspberry Pi to the Mount 4 M3 x 6mm Screws Secure the Voltage Regulator and the I2C Breakout to the Mount 6 M3x8mm Standoffs Used to elevate the voltage regulator and the I2C breakout 6 M3 x 8mm Screws Secure the Back Compute/E-port Mount &amp; Back of the rails to the Vehicle 4 M3 x 10mm Screws Secure Front of the rails to the Vehicle 2 M3 x 15mm Screws Secure the Front Compute/E-port Mount 2 Zip Ties - 6 inch Secure Cables to Lidar Rails and top mount 3-5 BluTack Secure the EPort and Cables to the vehicle 1 Dupont Female headers + Crimper Simple connection of the LW20/C to the Raspberry Pi 1 28AWG silicon wire kit Misc. Wiring 1"},{"location":"landing-moving-platform/components/#dji-m350","title":"DJI M350","text":"<p>It's a good PayloadSDK enabled Aircraft with enough capacity to carry small parts for our delivery scenario.</p>"},{"location":"landing-moving-platform/components/#lw20c","title":"LW20/C","text":"<p>We chose the LW20 for its range and its small form factor.  It's tempting to look at a multi-point lidar (like a 3D lidar), but it's not really necessary and the form factors would be significantly impacting the vehicle.</p> <p>By choosing a small lidar unit and leveraging software, we create a lightweight, yet powerful solution which gives us everything we need.</p>"},{"location":"landing-moving-platform/components/#raspberry-pi-5-e-port-kit","title":"Raspberry Pi 5 + E-Port Kit","text":"<p>Chosen for its compute capabilities and its wide availability, the Raspberry Pi 5 is a good mid-size compute.  There are many other choices that can navigate the range of solutions from lower power at smaller footprint or higher power as a bigger footprint.</p> <p>For the focused context of this scenario, this is plentiful.</p> <p>The E-Port Kit is a simple solution which is also widely available and affordable. </p> <p>Neither are elegant solution that will make this scenario feel like a real product and the natural next step would be developing a custom compute/E-Port breakout board in a clean package - which is particularly easy to achieve once the product capabilities has been validated.</p>"},{"location":"landing-moving-platform/components/#mounting-hardware","title":"Mounting Hardware","text":"<p>We chose to mount the LW20/C in a location that can allow for its placement to be both delivering on its expectations and remain out of the way of other critical components.</p> <p>All the parts are chosen to be modular, leveraging our mounting bracket which you can easily acquire from our store, or print yourself using our CAD files available in our resource center</p> <p>Now that we have all the parts involved, we can move onto putting the kit together.</p>"},{"location":"landing-moving-platform/hardware/","title":"Hardware","text":"<p>We will start by putting the hardware together.</p> <p>First make sure you have all the parts from the previous section.</p>"},{"location":"landing-moving-platform/hardware/#sensors","title":"Sensors","text":""},{"location":"landing-moving-platform/hardware/#preparation","title":"Preparation","text":"<p>First, we are going to prepare the rails and the clips that will attach the sensors on the belly of the aircraft.</p> <p>Secure the clips using the counter sunk screws as shown in this picture:</p> <p></p> <p>Next, we need to prepare the termination of the sensor to use dupont connectors. Out of the package, you will notice that the LW20/c comes with free wires. This is to give you options as to how to integrate, but in this case, we are going to use dupont connectors for convenience.</p> <p></p> <p>Crimp the black (GND), red (VCC), white (RX/SCL) and yellow (TX/SDA) wires individually, then encase them in a connector in this order.</p> <p></p>"},{"location":"landing-moving-platform/hardware/#mounting","title":"Mounting","text":"<p>Let's start by attaching the 3D printed bracket under the M350. </p> <p>Flip the aircraft on its 'head' (this is why we do this now, because the compute will be there once we're done). Remove and save the payload screws in case you want to remove the kit later.</p> <p></p> <p>Secure both rails using the M3x10mm on the front (where the payload is) and the M3x8mm for the back.</p> <p></p> <p>Clip the sensor to the printed parts and use blutack (may be a different color in your country) to hold the cables close to the body of the aircraft.</p> <p> </p> <p>Note</p> <p>There are obviously more resilient ways to secure the cables for production deployment, but our approach here is of R&amp;D and quick validation of the end-to-end system.</p> <p>You may choose to pass the cables and zip tie it all. The rails are ready for this, but you may need to extend the length of the wires for the back sensors.</p> <p>Otherwise, you can simply guide and putty the cables along the side of the aircraft while making sure not to block the view of the obstacle avoidance sensors.</p> <p>Once you have secured all four sensors, you are ready to move to the next step.</p>"},{"location":"landing-moving-platform/hardware/#compute-unit","title":"Compute Unit","text":"<p>Next, we are going to look at mounting the compute unit on the top of the aircraft.</p>"},{"location":"landing-moving-platform/hardware/#preparations","title":"Preparations","text":"<p>First, we will use the M2.5 heat-set inserts for the Raspberry Pi posts on the compute mount.  To insert them, simply use a soldering iron at the melting temperature of the plastic you use for printing the model. Pull out when sufficiently inserted.</p> <p>Note</p> <p>The heat-set inserts are an optional improvements. If you want to skip them, you can simply use coarse screws - such as wood screws - into the plastic directly.</p> <p></p> <p>Next, we will prepare the additional board for the voltage regulator that will provide the bulk of the power to the Raspberry Pi and the I2C breakout board.</p> <p>Note</p> <p>You can choose other options for the I2C bus and the voltage regulator as long as you provide what's necessary for the pi to work.</p> <p>First, we place the heat-set inserts as done before.</p> <p></p> <p>Next we are going to prepare the power cables. If you've opted to the ready made cables, you can skip this. If you want to make your own:</p> <p>Cut two set of black and red pairs of the 20AWG silicon cable: 12cm or 4 3/4\" for the power to the Pi; 16cm of 6 1/4\" for the power from the E-port Dev Kit.</p> <p>The Pi cable (12cm) will be crimped and set in a two line dupont connector</p> <p></p> <p>The E-Port Dev Kit will be soldered to an XT30 connector.</p> <p></p>"},{"location":"landing-moving-platform/hardware/#mounting_1","title":"Mounting","text":""},{"location":"landing-moving-platform/hardware/#voltage-regulator-and-i2c-breakout","title":"Voltage Regulator and I2C Breakout","text":"<p>To finish the add-on board, use the M3x6mm screws to secure the voltage regulator and the I2C bus breakout to the side board.</p> <p></p> <p>Next, connect to the input terminals the E-Port power cable and the Pi power cable to the output.</p> <p></p> <p>Note</p> <p>We will set up the voltage converter soon, but for now do not power anything.</p> <p>At this point the side board is fully assembled. Set it aside for now.</p>"},{"location":"landing-moving-platform/hardware/#raspberry-pie-port","title":"Raspberry Pi/E-Port","text":"<p>Grab the top mount and let's start with the E-Port Kit. It will sit in the bottom, under the Raspberry Pi. Place the E-Port kit as seen on the picture below, making sure that it sits in between the securing post.</p> <p></p> <p>Note</p> <p>You can secure it with zip ties or bluetac. The putty will do a great work, while the Raspberry Pi posts will prevent it to fly away in case of failure.</p> <p>Also, note the orientation as it will matter greatly. The \"Drone\" USB-C port should be facing starboard side of the mount.</p> <p>Verify that it isn't moving before moving to the next step.</p> <p>Before we move to the Pi, now is a good time to connect the USB/TTL cable to the pins on the E-Port as you'll be able to see the markings on the PCB.</p> <p>You can also plug in the USB-C cable that came with the kit, making sure the B side is showing upwards.</p> <p>Note</p> <p>The USB-C cable used for DJI development aren't regular USB-C cable. They aren't reversable. This is why they are noted with a A side and a B side. Pay close attention to the orientation as described in the DJI developer documentation:  </p> <p>Don't plug to the aircraft just yet.</p> <p>Time to attach the Raspberry Pi. You can choose to bring it with a case if you choose, but the mount we offer is coming with a through hole installation that's only compatible with the naked board or using the official case. Regardless, using the M2.5x6mm screws, secure the raspberry pi with the connectors facing the back of the aircraft.</p> <p>Don't over tighten.</p> <p></p>"},{"location":"landing-moving-platform/hardware/#assembly","title":"Assembly","text":"<p>First, we need to prepare the SDCard for the Raspberry Pi. Follow these instructions to get it done</p> <p>Once finished, place the SD Card in the Pi's slot.</p> <p>Next, clip the side board to the front of the Pi's mount. </p> <p></p> <p>Note</p> <p>The round clip would be enough to secure it, but if you want, you can secure them further with zip ties.</p> <p>Connect the XT30 power cable to the E-Port Dev Kit's unregulated power connector.</p> <p></p> <p>Connect the short USB-C cable between the device USB port of the E-Port dev kit and the Raspberry Pi's - This will be our fast data line.</p> <p></p> <p>Coil the USB to TTL cable around the base of the mount and connect the USB-A connector to one of the Raspberry Pi's</p> <p></p> <p>You should have something looking like this:</p> <p>Note</p> <p> Wiring diagram from DJI's Developer Documentation</p> <p>Now we can connect the I2C pins to the bus and to the Raspberry Pi.</p> <p>Following the marking on the bus, connect all the sensors to it.</p> <p></p> <p>Using the Dupont cables, connect each of the I2C lines to the Raspberry Pi pins</p> <p>Warning</p> <p> <p>Pinout from pinout.xyz</p> <p></p> <p>At this point, the only unconnected cable should be the power cable output of the voltage regulator. We will plug it after we configured the regulator with the aircraft power.</p>"},{"location":"landing-moving-platform/hardware/#aircraft-installation","title":"Aircraft Installation","text":"<p>First, we mount the completed kit to the aircraft using the M3x8mm screws in the back and the M3x15mm in the front.</p> <p></p> <p>With the dev kit secured, it's time to connect the usb cable to the aircraft.</p> <p>Note</p> <p>As mentioned before, the USB-C cable used for DJI development aren't regular USB-C cable. They aren't reversable. This is why they are noted with a A side and a B side. Pay close attention to the orientation as described in the DJI developer documentation:  </p> <p>From this point onwards, the kit will be powered and able to breakout the data connection to the vehicle, but the Raspberry Pi won't be able to get all the power it wants.</p>"},{"location":"landing-moving-platform/plan/","title":"Plan","text":"<p>In order to land a vehicle on a moving platform, we need to first characterize the situation. </p> <p>As we covered before, the deck of the boat will be moving in three axis and three degree of rotation - even of some are less affected. All this motion will limit the window of opportunity for the vehicle to commit to a landing.</p> <p>To understand when the window of opportunity presents itself, we need to be able to observe in real time the plane represented by the deck, identify a moment of least-risk and commit with understanding of the motion capabilities of the vehicle.</p> <p>Warning</p> <p>INSERT DIAGRAM HERE</p> <p>The DJI M350 does have sensor packages all around itself, but most aren't accessible to developers. Fortunately, the PayloadSDK allows us to bring our sensors and our computer onboard. With these we can also bring our control logic and write a custom landing mode.</p> <p>We can also trigger this mode from the ground using the MobileSDK.</p> <p>So we can create an array of our LW20 lidar sensor to great an accurate reading of the distance to the ground, recreate the plane it represents, process it on an onboard compute, make our decision and execute the landing using the PSDK.</p> <p>We will use custom-made hardware to secure the sensors and the compute onto the drone.</p> <p>Note</p> <p> fig 1 - System Diagram</p> <p>Now that we have a decent idea of how we can approach the problem, let's go over the components choice in details.</p>"},{"location":"landing-moving-platform/software/","title":"Software","text":""},{"location":"landing-moving-platform/software/#configuration","title":"Configuration","text":""},{"location":"landing-moving-platform/software/#payload-sdk","title":"Payload SDK","text":""},{"location":"landing-moving-platform/software/#raspberry-pi","title":"Raspberry Pi","text":""},{"location":"landing-moving-platform/software/#lw20c","title":"LW20/C","text":""},{"location":"landing-moving-platform/software/#project-code","title":"Project Code","text":""},{"location":"landing-moving-platform/software/#connecting-to-the-aircraft","title":"Connecting to the Aircraft","text":""},{"location":"landing-moving-platform/software/#connection-to-the-lw20c","title":"Connection to the LW20/c","text":""},{"location":"landing-moving-platform/software/#plane-detection-logic","title":"Plane detection logic","text":""},{"location":"landing-moving-platform/software/#landing-routine","title":"Landing routine","text":""},{"location":"precision-positioning/","title":"M350 Landing on a Moving Platform","text":"<p>In this scenario, we are going to walk through the steps to add a capability to the DJI M350 which isn't present on the vehicle by default: The ability to land on a moving platform.</p> <p>The scope of this tutorial is to focus on how to use our products, so we will skim through the other components and only cover the extent necessary for the whole solution to be reproduceable.</p>"},{"location":"precision-positioning/#plan","title":"Plan","text":"<p>In order to land a vehicle on a moving platform, we need to first characterize the situation. In this case, moving platform implies a vehicle which landing platform will be affected by it motion.  There is obviously the translational effect, but also the three-dimensional effect on the plate which will limit the window of opportunity for the vehicle to commit to a landing.</p> <p>In the case of boat, the deck of boat will tilt in two axis in a way that could jeopardize the vehicle's safety.</p> <p>To understand when the window of opportunity presents itself, we need to be able to observe in real time the plane represented by the deck and identify a moment of least-risk and commit with understanding of the motion capabilities of the vehicle.</p> <p>INSERT DIAGRAM HERE</p> <p>Now that we have a decent idea of how we will approach this problem, we can start planning for the components at play and their roles.</p>"},{"location":"precision-positioning/components/","title":"Components","text":""},{"location":"precision-positioning/components/#components","title":"Components","text":"<p>To achieve this, we will leverage four LW20/C lidar sensors. These will be used to create a real-time, high frequency plane detection to be incorporated in a custom landing routine running on an onboard computer attached to the M350.</p> Component Role DJI M350 Main Vehicle LW20C Landing Deck Plane Detection Raspberry Pi 5 Onboard Compute DJI E-Port Kit PSDK Interface"},{"location":"precision-positioning/hardware/","title":"Hardware","text":""},{"location":"precision-positioning/hardware/#hardware","title":"Hardware","text":""},{"location":"precision-positioning/plan/","title":"M350 Landing on a Moving Platform","text":"<p>In this scenario, we are going to walk through the steps to add a capability to the DJI M350 which isn't present on the vehicle by default: The ability to land on a moving platform.</p> <p>The scope of this tutorial is to focus on how to use our products, so we will skim through the other components and only cover the extent necessary for the whole solution to be reproduceable.</p>"},{"location":"precision-positioning/plan/#plan","title":"Plan","text":"<p>In order to land a vehicle on a moving platform, we need to first characterize the situation. In this case, moving platform implies a vehicle which landing platform will be affected by it motion.  There is obviously the translational effect, but also the three-dimensional effect on the plate which will limit the window of opportunity for the vehicle to commit to a landing.</p> <p>In the case of boat, the deck of boat will tilt in two axis in a way that could jeopardize the vehicle's safety.</p> <p>To understand when the window of opportunity presents itself, we need to be able to observe in real time the plane represented by the deck and identify a moment of least-risk and commit with understanding of the motion capabilities of the vehicle.</p> <p>INSERT DIAGRAM HERE</p> <p>Now that we have a decent idea of how we will approach this problem, we can start planning for the components at play and their roles.</p>"},{"location":"precision-positioning/software/","title":"Software","text":""},{"location":"precision-positioning/software/#software","title":"Software","text":""},{"location":"spoi/","title":"M350 Landing on a Moving Platform","text":"<p>In this scenario, we are going to walk through the steps to add a capability to the DJI M350 which isn't present on the vehicle by default: The ability to land on a moving platform.</p> <p>The scope of this tutorial is to focus on how to use our products, so we will skim through the other components and only cover the extent necessary for the whole solution to be reproduceable.</p>"},{"location":"spoi/#plan","title":"Plan","text":"<p>In order to land a vehicle on a moving platform, we need to first characterize the situation. In this case, moving platform implies a vehicle which landing platform will be affected by it motion.  There is obviously the translational effect, but also the three-dimensional effect on the plate which will limit the window of opportunity for the vehicle to commit to a landing.</p> <p>In the case of boat, the deck of boat will tilt in two axis in a way that could jeopardize the vehicle's safety.</p> <p>To understand when the window of opportunity presents itself, we need to be able to observe in real time the plane represented by the deck and identify a moment of least-risk and commit with understanding of the motion capabilities of the vehicle.</p> <p>INSERT DIAGRAM HERE</p> <p>Now that we have a decent idea of how we will approach this problem, we can start planning for the components at play and their roles.</p>"},{"location":"spoi/components/","title":"Components","text":""},{"location":"spoi/components/#components","title":"Components","text":"<p>To achieve this, we will leverage four LW20/C lidar sensors. These will be used to create a real-time, high frequency plane detection to be incorporated in a custom landing routine running on an onboard computer attached to the M350.</p> Component Role DJI M350 Main Vehicle LW20C Landing Deck Plane Detection Raspberry Pi 5 Onboard Compute DJI E-Port Kit PSDK Interface"},{"location":"spoi/hardware/","title":"Hardware","text":""},{"location":"spoi/hardware/#hardware","title":"Hardware","text":""},{"location":"spoi/plan/","title":"M350 Landing on a Moving Platform","text":"<p>In this scenario, we are going to walk through the steps to add a capability to the DJI M350 which isn't present on the vehicle by default: The ability to land on a moving platform.</p> <p>The scope of this tutorial is to focus on how to use our products, so we will skim through the other components and only cover the extent necessary for the whole solution to be reproduceable.</p>"},{"location":"spoi/plan/#plan","title":"Plan","text":"<p>In order to land a vehicle on a moving platform, we need to first characterize the situation. In this case, moving platform implies a vehicle which landing platform will be affected by it motion.  There is obviously the translational effect, but also the three-dimensional effect on the plate which will limit the window of opportunity for the vehicle to commit to a landing.</p> <p>In the case of boat, the deck of boat will tilt in two axis in a way that could jeopardize the vehicle's safety.</p> <p>To understand when the window of opportunity presents itself, we need to be able to observe in real time the plane represented by the deck and identify a moment of least-risk and commit with understanding of the motion capabilities of the vehicle.</p> <p>INSERT DIAGRAM HERE</p> <p>Now that we have a decent idea of how we will approach this problem, we can start planning for the components at play and their roles.</p>"},{"location":"spoi/software/","title":"Software","text":""},{"location":"spoi/software/#software","title":"Software","text":""}]}